{"version":3,"sources":["webpack:///src/components/body/user/update/update.vue","webpack:///./src/components/body/user/update/update.vue?f9b7","webpack:///./src/components/body/user/update/update.vue"],"names":["update","axios","create","baseURL","timeout","withCredentials","name","data","activeName","basicInfo","nickname","signature","birthday","sex","place","bindingInfo","privateInfo","userDetail","AxiosRequest","this","$store","state","CloudMusicApi","methods","onSubmit","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","gender","params","wrap","_context","prev","next","console","log","city","$request","sent","duplicated","$message","error","post","code","updateUserInfo","stop","_this2","_callee2","profile","_context2","$checkLogin","commit","created","_this3","_callee3","result","_context3","Object","server","uid","userInfo","userId","update_update","render","_vm","_h","$createElement","_c","_self","_v","attrs","type","model","value","callback","$$v","expression","label","$set","disabled","on","click","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.c32934e9f441ef6785d1.js","sourcesContent":["<template>\r\n<div>\r\n    <keep-alive>\r\n      <h1>个人设置</h1>\r\n    <el-tabs v-model=\"activeName\" type=\"card\">\r\n        <el-tab-pane label=\"基本设置\" name=\"basic\">\r\n        <div v-if=\"activeName==='basic'\">\r\n        <el-form v-model=\"basicInfo\">\r\n            <el-form-item label=\"昵称\">\r\n                <el-input v-model=\"basicInfo.nickname\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"介绍\">\r\n                <el-input type=\"textarea\" v-model=\"basicInfo.signature\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"性别\">\r\n                <el-radio-group v-model=\"basicInfo.sex\">\r\n                 <el-radio label=\"男\"></el-radio>\r\n                 <el-radio label=\"女\"></el-radio>   \r\n                </el-radio-group>\r\n                \r\n            </el-form-item>\r\n            <el-form-item label=\"出生日期\">\r\n                <el-date-picker type=\"date\" v-model=\"basicInfo.birthday\"></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"所在地区\" disabled>\r\n                <el-select  disabled v-model=\"basicInfo.place\">\r\n                    <el-option value=\"重庆\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n                <el-button @click=\"onSubmit\">提交</el-button>    \r\n            </el-form>\r\n            \r\n        </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"绑定设置\" name=\"binding\">2</el-tab-pane>\r\n        <el-tab-pane label=\"隐私设置\" name=\"private\">3</el-tab-pane>\r\n    </el-tabs>   \r\n    </keep-alive>\r\n  \r\n</div>\r\n</template>\r\n<script>\r\nimport { getUserDetail } from '../../../../network/server';\r\nimport axios from 'axios';\r\n// import vuex from '../store/index';\r\nconst AxiosRequest = axios.create({\r\n    baseURL: 'https://api.hanling.space',\r\n    timeout: 30000,\r\n    withCredentials: true,\r\n  });\r\nexport default{\r\n    name:\"update\",\r\n    data(){\r\n        return{\r\n            activeName:\"basic\",//basic binding private\r\n            basicInfo:{\r\n                nickname:\"\",\r\n                signature:\"\",\r\n                birthday:\"\",\r\n                sex:\"\",\r\n                place:\"\",\r\n            },\r\n            bindingInfo:{\r\n\r\n            },\r\n            privateInfo:{\r\n\r\n            },\r\n            //这里的userDetail不等于userInfo , profile只是其中的一个属性\r\n            userDetail:{ },\r\n            AxiosRequest : axios.create({\r\n                baseURL: this.$store.state.CloudMusicApi,\r\n                timeout: 30000,\r\n                withCredentials: true,\r\n                })\r\n\r\n        }\r\n    } ,\r\n    methods:{\r\n        async onSubmit(){\r\n            \r\n            console.log(this.basicInfo);\r\n            let nickname = this.basicInfo.nickname;\r\n            let gender = this.basicInfo.sex=='男'?1:2;\r\n            let signature = this.basicInfo.signature;\r\n            let birthday = this.basicInfo.birthday;\r\n            let params = {\r\n                city:500101,\r\n                nickname:nickname,\r\n                gender:gender,\r\n                signature:signature,\r\n                birthday:birthday,\r\n            };\r\n            //重复昵称检测\r\n            let isDuplicated = await this.$request(\"nickname/check\",{nickname:nickname});\r\n            //重复\r\n            if(isDuplicated.data.duplicated){\r\n                this.$message.error(\"昵称重复，请另写昵称\");\r\n            }\r\n            //\r\n            else{\r\n                let result = await this.AxiosRequest.post(\"/user/update\",params);\r\n                if(result.data.code==200){\r\n                    this.$message(\"提交成功\");\r\n                    this.updateUserInfo();\r\n                }else{\r\n                    this.$message.error(\"提交失败\");\r\n                }\r\n            }\r\n            },//submit函数结束\r\n            //更新store里的用户信息\r\n            async updateUserInfo(){\r\n                let profile = this.$checkLogin();\r\n                this.$store.commit(\"updateUserInfo\",profile);\r\n            }\r\n              \r\n           \r\n        },\r\n        \r\n    \r\n    async created(){\r\n       let result = await getUserDetail({uid:this.$store.state.userInfo.userId});\r\n       this.userDetail = result.data;\r\n    //    console.log(this.userDetail);\r\n\r\n        this.basicInfo.nickname = this.userDetail.profile.nickname;\r\n        this.basicInfo.signature = this.userDetail.profile.signature;\r\n        this.basicInfo.sex = this.userDetail.profile.gender==1? '男':'女';\r\n        this.basicInfo.birthday = this.userDetail.profile.birthday;\r\n\r\n    }  \r\n}\r\n</script>\r\n<style scoped>\r\n.el-input{\r\n    width:400px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/body/user/update/update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('keep-alive',[_c('h1',[_vm._v(\"个人设置\")]),_vm._v(\" \"),_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本设置\",\"name\":\"basic\"}},[(_vm.activeName==='basic')?_c('div',[_c('el-form',{model:{value:(_vm.basicInfo),callback:function ($$v) {_vm.basicInfo=$$v},expression:\"basicInfo\"}},[_c('el-form-item',{attrs:{\"label\":\"昵称\"}},[_c('el-input',{model:{value:(_vm.basicInfo.nickname),callback:function ($$v) {_vm.$set(_vm.basicInfo, \"nickname\", $$v)},expression:\"basicInfo.nickname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"介绍\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.basicInfo.signature),callback:function ($$v) {_vm.$set(_vm.basicInfo, \"signature\", $$v)},expression:\"basicInfo.signature\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"性别\"}},[_c('el-radio-group',{model:{value:(_vm.basicInfo.sex),callback:function ($$v) {_vm.$set(_vm.basicInfo, \"sex\", $$v)},expression:\"basicInfo.sex\"}},[_c('el-radio',{attrs:{\"label\":\"男\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"女\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"出生日期\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\"},model:{value:(_vm.basicInfo.birthday),callback:function ($$v) {_vm.$set(_vm.basicInfo, \"birthday\", $$v)},expression:\"basicInfo.birthday\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所在地区\",\"disabled\":\"\"}},[_c('el-select',{attrs:{\"disabled\":\"\"},model:{value:(_vm.basicInfo.place),callback:function ($$v) {_vm.$set(_vm.basicInfo, \"place\", $$v)},expression:\"basicInfo.place\"}},[_c('el-option',{attrs:{\"value\":\"重庆\"}})],1)],1),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")])],1)],1):_vm._e()]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"绑定设置\",\"name\":\"binding\"}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"隐私设置\",\"name\":\"private\"}},[_vm._v(\"3\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-62978829\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/body/user/update/update.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-62978829\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./update.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-62978829\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./update.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-62978829\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/body/user/update/update.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}