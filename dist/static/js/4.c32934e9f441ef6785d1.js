webpackJsonp([4],{ZS7M:function(e,a){},t9zA:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("Xxa5"),s=t.n(n),i=t("exGp"),r=t.n(i),c=t("IVis"),o=t("mtWM"),l=(o.a.create({baseURL:"https://api.hanling.space",timeout:3e4,withCredentials:!0}),{name:"update",data:function(){return{activeName:"basic",basicInfo:{nickname:"",signature:"",birthday:"",sex:"",place:""},bindingInfo:{},privateInfo:{},userDetail:{},AxiosRequest:o.a.create({baseURL:this.$store.state.CloudMusicApi,timeout:3e4,withCredentials:!0})}},methods:{onSubmit:function(){var e=this;return r()(s.a.mark(function a(){var t,n,i,r,c;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e.basicInfo),t=e.basicInfo.nickname,n="男"==e.basicInfo.sex?1:2,i=e.basicInfo.signature,r=e.basicInfo.birthday,c={city:500101,nickname:t,gender:n,signature:i,birthday:r},a.next=8,e.$request("nickname/check",{nickname:t});case 8:if(!a.sent.data.duplicated){a.next=13;break}e.$message.error("昵称重复，请另写昵称"),a.next=17;break;case 13:return a.next=15,e.AxiosRequest.post("/user/update",c);case 15:200==a.sent.data.code?(e.$message("提交成功"),e.updateUserInfo()):e.$message.error("提交失败");case 17:case"end":return a.stop()}},a,e)}))()},updateUserInfo:function(){var e=this;return r()(s.a.mark(function a(){var t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=e.$checkLogin(),e.$store.commit("updateUserInfo",t);case 2:case"end":return a.stop()}},a,e)}))()}},created:function(){var e=this;return r()(s.a.mark(function a(){var t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.c)({uid:e.$store.state.userInfo.userId});case 2:t=a.sent,e.userDetail=t.data,e.basicInfo.nickname=e.userDetail.profile.nickname,e.basicInfo.signature=e.userDetail.profile.signature,e.basicInfo.sex=1==e.userDetail.profile.gender?"男":"女",e.basicInfo.birthday=e.userDetail.profile.birthday;case 8:case"end":return a.stop()}},a,e)}))()}}),u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("keep-alive",[t("h1",[e._v("个人设置")]),e._v(" "),t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"基本设置",name:"basic"}},["basic"===e.activeName?t("div",[t("el-form",{model:{value:e.basicInfo,callback:function(a){e.basicInfo=a},expression:"basicInfo"}},[t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{model:{value:e.basicInfo.nickname,callback:function(a){e.$set(e.basicInfo,"nickname",a)},expression:"basicInfo.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"介绍"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.basicInfo.signature,callback:function(a){e.$set(e.basicInfo,"signature",a)},expression:"basicInfo.signature"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.basicInfo.sex,callback:function(a){e.$set(e.basicInfo,"sex",a)},expression:"basicInfo.sex"}},[t("el-radio",{attrs:{label:"男"}}),e._v(" "),t("el-radio",{attrs:{label:"女"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"出生日期"}},[t("el-date-picker",{attrs:{type:"date"},model:{value:e.basicInfo.birthday,callback:function(a){e.$set(e.basicInfo,"birthday",a)},expression:"basicInfo.birthday"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所在地区",disabled:""}},[t("el-select",{attrs:{disabled:""},model:{value:e.basicInfo.place,callback:function(a){e.$set(e.basicInfo,"place",a)},expression:"basicInfo.place"}},[t("el-option",{attrs:{value:"重庆"}})],1)],1),e._v(" "),t("el-button",{on:{click:e.onSubmit}},[e._v("提交")])],1)],1):e._e()]),e._v(" "),t("el-tab-pane",{attrs:{label:"绑定设置",name:"binding"}},[e._v("2")]),e._v(" "),t("el-tab-pane",{attrs:{label:"隐私设置",name:"private"}},[e._v("3")])],1)],1)],1)},staticRenderFns:[]};var b=t("VU/8")(l,u,!1,function(e){t("ZS7M")},"data-v-62978829",null);a.default=b.exports}});
//# sourceMappingURL=4.c32934e9f441ef6785d1.js.map